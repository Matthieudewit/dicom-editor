<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        .log-container {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
            max-height: 70vh;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            margin: 1rem 0;
        }
        
        .log-entry {
            margin-bottom: 0.5rem;
            word-wrap: break-word;
        }
        
        .log-level-DEBUG { color: #6c757d; }
        .log-level-INFO { color: #28a745; }
        .log-level-WARNING { color: #ffc107; }
        .log-level-ERROR { color: #dc3545; }
        .log-level-CRITICAL { color: #6f42c1; }
        
        .back-button {
            background-color: #6c757d;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 1rem;
        }
        
        .back-button:hover {
            background-color: #5a6268;
        }
        
        .refresh-button {
            background-color: #28a745;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 1rem;
            margin-left: 1rem;
        }
        
        .refresh-button:hover {
            background-color: #218838;
        }
    </style>
</head>

<body>
    <div class="page-header">
        <h2>Application Logs</h2>
        <div class="utility-buttons">
            <a href="{{ url_for('index') }}" class="back-button">Back to Studies</a>
            <a href="{{ url_for('view_logs') }}" class="refresh-button">Refresh</a>
        </div>
    </div>
    
    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash {{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    {% if log_content %}
        <div class="log-container">
            {% for line in log_content %}
                <div class="log-entry {% if ' - DEBUG - ' in line %}log-level-DEBUG{% elif ' - INFO - ' in line %}log-level-INFO{% elif ' - WARNING - ' in line %}log-level-WARNING{% elif ' - ERROR - ' in line %}log-level-ERROR{% elif ' - CRITICAL - ' in line %}log-level-CRITICAL{% endif %}">{{ line }}</div>
            {% endfor %}
        </div>
    {% else %}
        <div class="log-container">
            <p>No log file found or log file is empty.</p>
        </div>
    {% endif %}
    
    <script>
        // Auto-scroll to bottom of log container
        document.addEventListener('DOMContentLoaded', function() {
            const logContainer = document.querySelector('.log-container');
            if (logContainer) {
                logContainer.scrollTop = logContainer.scrollHeight;
            }
        });
    </script>
</body>

</html>
